# Trade Tutorial Lesson Chains
# These chains define the progression of trade tutorials integrated with vanilla lesson chains
# Main trade lesson chain - Basic introduction to trade system
trade_basics_chain = {
	# Only show after player has completed the basic game tutorials
	trigger = {
		# This ensures we don't show trade tutorials until basics are covered
		is_tutorial_lesson_chain_completed = lesson_chain_basics_unpause
		# Make sure player has also completed core game mechanics tutorials
		is_tutorial_lesson_chain_completed = lesson_chain_basics_core_mechanics
		# Ensure player has been introduced to economic management
		is_tutorial_lesson_completed = lesson_domain_management
		# Only offer trade tutorials if player has counties near trade routes
		exists = capital_province
		capital_province.county = {
			OR = {
				has_county_flag = on_silk_road
				any_neighboring_county = {
					has_county_flag = on_silk_road
				}
			}
		}
		# Don't show if player has already completed all trade tutorials
		NOR = {
			AND = {
				has_character_flag = completed_trade_introduction
				has_character_flag = completed_trade_buildings_tutorial
				has_character_flag = completed_trade_policies_tutorial
			}
		}
	}
	# Save progress in the game state so it's preserved between sessions
	save_progress_in_gamestate = yes
	# Define the order of lessons in this chain with proper progression
	lessons = {
		trade_introduction_lesson		# Start with general introduction
		trade_buildings_lesson		# Then cover buildings
		trade_policies_lesson		# Finally cover policies
	}
	# Define a completion trigger for this chain
	completion_trigger = {
		has_character_flag = completed_trade_policies_tutorial
	}
	# Set follow up lessons that become available after this
	follow_up_tutorial_lesson_chains = {
		trade_advanced_chain		# Will be implemented in future updates
	}
}

# Reactive lesson chain - Used for important action notifications
trade_reactive_chain = {
	# No specific trigger - these are shown based on important action triggers
	trigger = {
		# Only show reactive lessons after player has seen introduction
		has_character_flag = viewed_trade_introduction_step1
		# And if the player has access to the trade system
		any_held_title = {
			tier = county
			OR = {
				has_county_flag = on_silk_road
				any_neighboring_county = {
					has_county_flag = on_silk_road
				}
			}
		}
	}
	save_progress_in_gamestate = yes
	# Reactive lessons that can be triggered by important actions
	lessons = {
		# Empty for now - will be populated with reactive lessons as needed
		# This structure is included as a placeholder for the MVP
	}
	# Prerequisites from vanilla lesson chains
	prerequisite_tutorial_lesson_chains = {
		lesson_chain_basics_unpause		# Basic game operations
		lesson_chain_basics_core_mechanics		# Core gameplay
	}
}

# Intermediate trade mechanics chain - For more advanced trade concepts
# Not used in MVP but structure is defined for future expansion
trade_advanced_chain = {
	# Only show after player has completed the basic trade chain
	trigger = {
		# Requires completion of basic trade tutorials
		is_tutorial_lesson_chain_completed = trade_basics_chain
		# And requires player to have reasonable understanding of game economics
		is_tutorial_lesson_completed = lesson_domain_management
		# Additional requirements for showing advanced tutorials can be added here
	}
	save_progress_in_gamestate = yes
	# Define the order of lessons in this chain
	# Will be populated in future updates
	lessons = {
		# Empty for MVP
	}
	# Prerequisites from other lesson chains
	prerequisite_tutorial_lesson_chains = {
		trade_basics_chain		# Basic trade lessons
		lesson_chain_basics_core_mechanics		# Core gameplay
	}
}
